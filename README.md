# NetworkSwitch - Mac ç½‘ç»œè‡ªåŠ¨åˆ‡æ¢å·¥å…·
# NetworkSwitch - Automatic Network Switching Tool for Mac

ä¸€æ¬¾ç®€æ´çš„ macOS çŠ¶æ€æ åº”ç”¨ï¼Œå¯ä»¥åœ¨æ£€æµ‹åˆ°æœ‰çº¿ç½‘ç»œï¼ˆä»¥å¤ªç½‘ï¼‰æ¥å…¥æ—¶è‡ªåŠ¨å…³é—­ Wi-Fiï¼Œåœ¨æœ‰çº¿ç½‘ç»œæ–­å¼€æ—¶è‡ªåŠ¨æ¢å¤ Wi-Fi è¿æ¥ã€‚
A lightweight macOS menu bar application that automatically turns off Wi-Fi when an Ethernet connection is detected and turns it back on when Ethernet is disconnected.

---

## ğŸš€ ä¸»è¦åŠŸèƒ½ (Features)

- **âœ… è‡ªåŠ¨åˆ‡æ¢ (Automatic Switching)**:
  - æ£€æµ‹åˆ°ä»¥å¤ªç½‘è¿æ¥æ—¶ï¼Œè‡ªåŠ¨å…³é—­ Wi-Fiã€‚
  - When an Ethernet connection is detected, Wi-Fi is automatically turned off.
  - ä»¥å¤ªç½‘è¿æ¥æ–­å¼€æ—¶ï¼Œè‡ªåŠ¨é‡æ–°å¼€å¯ Wi-Fiã€‚
  - When the Ethernet connection is lost, Wi-Fi is automatically re-enabled.
- **âœ… çŠ¶æ€æ èœå• (Menu Bar Integration)**:
  - æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½éƒ½é›†æˆåœ¨çŠ¶æ€æ èœå•ä¸­ï¼Œæ–¹ä¾¿å¿«é€Ÿæ“ä½œã€‚
  - All core functions are integrated into the menu bar for quick access.
- **âœ… å¼€æœºè‡ªå¯ (Launch at Login)**:
  - å¯åœ¨åå¥½è®¾ç½®ä¸­è®¾ä¸ºå¼€æœºè‡ªåŠ¨å¯åŠ¨ã€‚
  - Can be configured to launch automatically at login via preferences.
- **âœ… å®æ—¶çŠ¶æ€ (Real-time Status)**:
  - çŠ¶æ€æ å›¾æ ‡å’Œèœå•ä¼šå®æ—¶æ˜¾ç¤ºå½“å‰ç½‘ç»œè¿æ¥çŠ¶æ€ã€‚
  - The menu bar icon and menu display the current network status in real time.
- **âœ… ç³»ç»Ÿé€šçŸ¥ (System Notifications)**:
  - æ¯å½“ç½‘ç»œçŠ¶æ€å‘ç”Ÿè‡ªåŠ¨åˆ‡æ¢æ—¶ï¼Œéƒ½ä¼šæ”¶åˆ°ç³»ç»Ÿé€šçŸ¥ã€‚
  - Receive a system notification whenever an automatic network switch occurs.

---

## ğŸ’» å¦‚ä½•å®‰è£… (Installation)

1. **ä¸‹è½½åº”ç”¨ (Download the App)**
   - å‰å¾€é¡¹ç›®çš„ [**Releases**](https://github.com/lvxinyan/NetworkSwitch/releases) é¡µé¢ã€‚
   - Go to the project's [**Releases**](https://github.com/lvxinyan/NetworkSwitch/releases) page.
   - ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„ `NetworkSwitch-vX.X.X.dmg` æ–‡ä»¶ã€‚
   - Download the latest `NetworkSwitch-vX.X.X.dmg` file.

2. **å®‰è£… (Install)**
   - åŒå‡»æ‰“å¼€ `.dmg` æ–‡ä»¶ã€‚
   - Double-click the downloaded `.dmg` file.
   - å°† `NetworkSwitch.app` å›¾æ ‡æ‹–æ‹½åˆ° `Applications` (åº”ç”¨ç¨‹åº) æ–‡ä»¶å¤¹ä¸­ã€‚
   - Drag the `NetworkSwitch.app` icon into your `Applications` folder.

3. **é¦–æ¬¡è¿è¡Œ (First Launch)**
   - é¦–æ¬¡æ‰“å¼€åº”ç”¨æ—¶ï¼Œå¦‚æœç³»ç»Ÿæç¤º"æ— æ³•éªŒè¯å¼€å‘è€…"ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š
   - On the first launch, if you see a "Cannot verify developer" warning:
   - å‰å¾€ `ç³»ç»Ÿè®¾ç½®` > `éšç§ä¸å®‰å…¨æ€§`ï¼Œåœ¨ä¸‹æ–¹çš„å®‰å…¨éƒ¨åˆ†ç‚¹å‡»"ä»è¦æ‰“å¼€"ã€‚
   - Go to `System Settings` > `Privacy & Security`, and in the security section at the bottom, click "Open Anyway".
   - æˆ–è€…ï¼Œå³é”®ç‚¹å‡»åº”ç”¨å›¾æ ‡ï¼Œé€‰æ‹©"æ‰“å¼€"ã€‚
   - Alternatively, right-click the app icon and select "Open".

---

## ğŸ’¡ å¦‚ä½•ä½¿ç”¨ (Usage)

- **å¯åŠ¨åº”ç”¨ (Launch the App)**:
  - å¯åŠ¨åï¼Œåº”ç”¨å›¾æ ‡ä¼šå‡ºç°åœ¨å±å¹•å³ä¸Šè§’çš„çŠ¶æ€æ ä¸­ï¼ŒåŒæ—¶ä¼šæ˜¾ç¤ºä¸»è®¾ç½®çª—å£ã€‚
  - After launching, the app icon will appear in the menu bar at the top-right of your screen, and the main settings window will be displayed.
- **å¯ç”¨/ç¦ç”¨ (Enable/Disable)**:
  - åœ¨ä¸»çª—å£æˆ–çŠ¶æ€æ èœå•ä¸­ï¼Œå‹¾é€‰/å–æ¶ˆå‹¾é€‰ "å¯ç”¨è‡ªåŠ¨åˆ‡æ¢" å³å¯æ§åˆ¶åº”ç”¨ã€‚
  - Check/uncheck "Enable Auto Switch" in the main window or menu bar to control the app.
- **éšè—çª—å£ (Hide Window)**:
  - ç‚¹å‡»ä¸»çª—å£çš„å…³é—­æŒ‰é’®æˆ–çŠ¶æ€æ èœå•çš„"éšè—"é€‰é¡¹ï¼Œå¯å°†çª—å£å…³é—­ï¼Œåº”ç”¨ä¼šç»§ç»­åœ¨çŠ¶æ€æ è¿è¡Œã€‚
  - Click the close button on the main window or the "Hide" option in the menu to dismiss the window. The app will continue running in the menu bar.

---

## âš™ï¸ å·¥ä½œåŸç† (How It Works)

- **ç½‘ç»œç›‘æ§ (Network Monitoring)**:
  - ä½¿ç”¨è‹¹æœç°ä»£åŒ–çš„ `Network.framework` æ¡†æ¶ä¸­çš„ `NWPathMonitor` æ¥å®æ—¶ã€é«˜æ•ˆåœ°ç›‘æ§ç½‘ç»œè¿æ¥çŠ¶æ€çš„å˜åŒ–ï¼Œç‰¹åˆ«æ˜¯ä»¥å¤ªç½‘æ¥å£çš„è¿æ¥ä¸æ–­å¼€ã€‚
  - It uses `NWPathMonitor` from Apple's modern `Network.framework` to efficiently monitor changes in network connection status in real time, especially for the Ethernet interface.
- **è‡ªåŠ¨åˆ‡æ¢ (Automated Toggling)**:
  - å½“æ£€æµ‹åˆ°ä»¥å¤ªç½‘å¯ç”¨æ—¶ï¼Œåº”ç”¨ä¼šè°ƒç”¨ç³»ç»Ÿåº•å±‚çš„ `networksetup` å‘½ä»¤è¡Œå·¥å…·æ¥å…³é—­ Wi-Fi æœåŠ¡ã€‚
  - When an Ethernet connection becomes available, the app invokes the underlying `networksetup` command-line tool to turn off the Wi-Fi service.
  - å½“ä»¥å¤ªç½‘æ–­å¼€æ—¶ï¼Œå†æ¬¡è°ƒç”¨è¯¥å·¥å…·é‡æ–°å¼€å¯ Wi-Fi æœåŠ¡ã€‚
  - When the Ethernet connection is lost, it calls the tool again to re-enable the Wi-Fi service.
- **å»¶è¿Ÿé˜²æŠ– (Debouncing)**:
  - å†…ç½®äº†çŸ­æš‚çš„å»¶è¿Ÿæœºåˆ¶ï¼Œä»¥é¿å…åœ¨ç½‘ç»œçŠ¶æ€å¿«é€Ÿã€é¢‘ç¹æ³¢åŠ¨æ—¶ï¼ˆä¾‹å¦‚æ’æ‹”ç½‘çº¿çš„ç¬é—´ï¼‰æ‰§è¡Œä¸å¿…è¦çš„é‡å¤åˆ‡æ¢ã€‚
  - A short delay is built-in to prevent unnecessary, repetitive switching during rapid network fluctuations (e.g., the moment of plugging/unplugging a cable).

---

## ğŸ‘¨â€ğŸ’» è‡´å¼€å‘è€… (For Developers)

è‹¥æ‚¨æƒ³ä»æºç æ„å»ºæœ¬é¡¹ç›®ï¼Œè¯·ç¡®ä¿æ‚¨å·²å®‰è£… Xcodeã€‚ç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
If you wish to build the project from the source, ensure you have Xcode installed. Then, run the following command in the project's root directory:

```bash
./build_release.sh
```
è¯¥è„šæœ¬å°†è‡ªåŠ¨æ„å»ºåº”ç”¨ï¼Œå¹¶åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ç”Ÿæˆå¯åˆ†å‘çš„ `.dmg` å’Œ `.zip` æ–‡ä»¶ã€‚
This script will build the application and create distributable `.dmg` and `.zip` files in the project's root directory.

---

## ğŸ“„ è®¸å¯è¯ (License)

æœ¬é¡¹ç›®åŸºäº **GNU Affero General Public License v3.0** å‘å¸ƒã€‚è¯¦æƒ…è¯·è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚
This project is licensed under the **GNU Affero General Public License v3.0**. See the [LICENSE](LICENSE) file for details. 